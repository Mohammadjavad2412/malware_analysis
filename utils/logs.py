from analyze.models import LogServerConfig
import logging
import logging.handlers


def define_sys_logger():
    try:
        from analyze.serializers import LogServerSerializer
        logger = logging.getLogger('logger')
        logger.setLevel(logging.DEBUG)
        logserver_obj = LogServerConfig.objects.all().first()
        ser_log = LogServerSerializer(logserver_obj)
        log_server_host = ser_log.data['log_server_host']
        log_server_port = ser_log.data['log_server_port']
        handler = logging.handlers.SysLogHandler(address=(log_server_host, int(log_server_port)))
        logger.addHandler(handler)
    except:
        logger = logging
    return logger
