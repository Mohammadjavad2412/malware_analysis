from rest_framework import filters
from urllib.parse import unquote

class CustomSearchFilter(filters.SearchFilter):
    def get_search_terms(self, request):
        params = request.query_params.get(self.search_param, '')
        if "%" in params:
            return unquote(params)
        return params
        
    def get_search_fields(self, view, request):
        if "%" in request.query_params.get(self.search_param, ''):
            return view.get_custom_search_fields()
        return view.search_fields